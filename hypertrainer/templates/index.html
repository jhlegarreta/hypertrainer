<!doctype html>
<title>HyperTrainer</title>

<script type="text/javascript" src="static/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="static/tablesort.js"></script>
<script type="text/javascript" src="static/semantic-ui/semantic.min.js"></script>
<link rel="stylesheet" type="text/css" href="static/semantic-ui/semantic.min.css">

<style type="text/css">
  table td.Running { background-color: #7aa3ff; }
  table td.Finished { background-color: #78e878; }
  table td.Crashed { background-color: #ff7676; }
  table td.Cancelled { background-color: #bfbfbf; }
</style>

<script type="text/javascript">
  $( document ).ready(function() {
    $('table').tablesort()
  });
</script>

<div class="ui inverted basic segment">
  <div class="ui container">
    <h1>HyperTrainer</h1>
  </div>
</div>

<div class="ui container">
  <h2>Status message</h2>
  <p>{{ msg }}</p>

  <div class="ui segment">
  <h2>Submit new task</h2>
  <form action="/?action=submit" method="post" class="ui form">
    <div class="fields">
      <div class="field">
        <label for="script">Script</label>
        <input name="script" id="script">
      </div>
      <div class="field">
        <label for="config">Config</label>
        <input name="config" id="config">
      </div>
      <div class="field">
        <label>&nbsp;</label>
        <input type="submit" value="Submit" class="ui submit button">
      </div>
    </div>
  </form>
  </div>

  <h2>Tasks</h2>

  <p><a href="/">Refresh</a></p>

  <table class="ui sortable celled compact table">
    <thead><tr>
      <th>ID</th>
      <th>Platform</th>
      <th>Name</th>
      <th>Status</th>
      <th>Actions</th>
    </tr></thead>
    {% for task in tasks %}
      <tr>
        <td data-label="ID">{{ task.task_id }}</td>
        <td data-label="Platform">{{ task.platform.name }}</td>
        <td data-label="Name">{{ task.name }}</td>
        <td data-label="Status" class="{{ task.status_str }}">{{ task.status_str }}</td>
        <td data-label="Actions">
          <a href="/monitor/{{ task.task_id }}" class="ui compact button">Monitor</a>
          <a href="/?action=kill&task_id={{ task.task_id }}" class="ui compact button">Cancel</a>
        </td>
      </tr>
    {% endfor %}
  </table>
</div>